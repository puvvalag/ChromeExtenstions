$(document).ready(function(){t();var e;r();function r(){var e=g===""?l:g;console.log(e);var t=$.ajax({type:"GET",url:e,success:function(e){n(e);if(g==="")o(0)}}).responseText}function n(e){var t=1;var n=e.items[0].publish_date;var o=new Date(n);var a=new Object;a.month=o.getMonth()+1;a.year=o.getFullYear();a.imagery=[];a.totalImagesAvailable=e.items.length;a.current="https://www.nationalgeographic.com/photography/photo-of-the-day/_jcr_content/.syndication-gallery."+a.year+"-"+a.month+".json";a.prev=e.previous_endpoint;a.next=e.next_endpoint;e.items.forEach(r);function r(e){var t=new Object;t.Title=e.image.title;t.PublishDate=e.publish_date;t.Month=o.getMonth()+1;t.Year=o.getFullYear();t.Thumbnail=e.image.renditions[12].uri;t.DownloadLink=e.image.uri;t.Caption=e.image.caption;a.imagery.push(t);++m;h[u]=t;++u}s[a.year+""+a.month]=a}function t(){leftImage=document.getElementById("left");leftImage.onmouseover=function(){a("left")};leftImage.onmouseout=function(){a("left")};leftImage.onclick=function(){c("-1")};rightImage=document.getElementById("right");rightImage.onmouseover=function(){a("right")};rightImage.onmouseout=function(){a("right")};rightImage.onclick=function(){c("1")};feedback=document.getElementById("feedback");feedback.onclick=function(){chrome.tabs.create({url:"http://goo.gl/gaI0Pq",selected:true})};var e=document.getElementById("aDownloadLink");e.onclick=function(){chrome.tabs.create({url:d,selected:false})};var t=document.getElementById("imgCenter");t.onclick=function(){chrome.tabs.create({url:d,selected:true})}}function o(e){var t=document.getElementById("imgCenter");var n=h[e];if(n===undefined){var o=Number(h[e-1].Year);var a=Number(h[e-1].Month);if(a==1){a=12;o-=1}else{a-=1}g="https://www.nationalgeographic.com/photography/photo-of-the-day/_jcr_content/.syndication-gallery."+o+"-"+a+".json";console.log("dynamicUrl : "+g);r()}else{t.src=n.Thumbnail;d=n.DownloadLink}}function a(e){image=document.getElementById(e);if(image.src.indexOf("On.png")>0)image.src=e+".png";else image.src=e+"On.png"}var i=0;function c(e){i=i+Number(e);if(i>=0)o(i);else i=0}});var e=(new Date).getFullYear();var t=(new Date).getMonth()+1;var l="https://www.nationalgeographic.com/photography/photo-of-the-day/_jcr_content/.syndication-gallery."+e+"-"+t+".json";var g="";var m=0;var u=0;var n=0;var h=new Object;var s=new Object;var d="";